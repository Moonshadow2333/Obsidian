---
aliases:
  - Flask
date: 2025-04-20
---

# 目录

```dataviewjs
const startHeadinglevel = 2;
const file = app.workspace.getActiveFile();
const { headings } = app.metadataCache.getFileCache(file);
 
// 全列表的形式
const raws = headings.filter(row => row.heading != "目录").map( p => {
    let repeatCount = Math.max((p.level - startHeadinglevel) * 4, 0);
    let spacesPrefix = ' '.repeat( repeatCount + 4 );
    let listSign = repeatCount > 0 ? '- ' : '';
    let linkText = `[[#${p.heading}]]`;
    let headingList = (p.level < startHeadinglevel) ? `- ${linkText}` : `${spacesPrefix}- ${linkText}`;
    return headingList;
  }
)
 
let result = raws.join('\n');
// 添加行距
dv.container.style.lineHeight = "1.5em";
dv.paragraph(result)
```

# 前言

今天早上在测试发送网络请求时

```python
from flask import Flask, request, jsonify
```

# 核心类

```python
from flask import Flask, request, jsonify
app = Flask(__name__)

# 基础 POST 请求处理
@app.route('/api/data', methods=['POST'])
def handle_post():
    # 检查请求头是否为 JSON
    if not request.is_json:
        return jsonify({"error": "Request must be JSON"}), 400

    # 获取 JSON 数据
    data = request.get_json()
    
    # 验证必要字段
    required_fields = ['username', 'email']
    if not all(field in data for field in required_fields):
        return jsonify({"error": "Missing required fields"}), 400

    # 处理数据（示例：简单验证邮箱格式）
    email = data['email']
    if '@' not in email or '.' not in email.split('@')[-1]:
        return jsonify({"error": "Invalid email format"}), 400

    # 返回处理结果
    response = {
        "status": "success",
        "message": f"User {data['username']} created",
        "email": email
    }
    return jsonify(response), 201

# 表单数据处理示例
@app.route('/submit-form', methods=['POST'])
def handle_form():
    # 获取表单数据
    name = request.form.get('name')
    age = request.form.get('age', type=int)
    
    # 验证数据
    if not name:
        return "Name is required", 400
    if not age or age < 0:
        return "Invalid age", 400
    
    return f"Received: Name={name}, Age={age}"

# 文件上传示例
@app.route('/upload', methods=['POST'])
def upload_file():
    # 检查文件是否存在
    if 'file' not in request.files:
        return jsonify({"error": "No file part"}), 400
    
    file = request.files['file']
    
    # 检查文件名是否为空
    if file.filename == '':
        return jsonify({"error": "No selected file"}), 400
    
    # 保存文件（示例）
    if file:
        file.save(f"uploads/{file.filename}")
        return jsonify({"message": f"File {file.filename} uploaded successfully"}), 200

if __name__ == '__main__':
    app.run(debug=True, port=5000)
```

## Flask

Flask：Flask 是 Flask 框架的核心类，用于创建 Web 应用程序实例。每个 Flask 应用都是这个类的一个实例。通过创建 Flask 实例，你可以定义路由、处理请求并返回响应。

## request

request：request 对象用于处理客户端发送到服务器的 HTTP 请求。它包含了请求的所有信息，例如请求方法（GET、POST 等）、请求头、请求参数以及请求体中的数据等。利用 request 对象，你可以在应用程序中获取和处理这些请求信息。

## jsonify

jsonify：jsonify 函数用于将 Python 数据结构（如字典、列表）转换为 JSON 格式的响应，并设置正确的 Content-Type 头信息（application/json）。这在需要返回 JSON 格式数据给客户端时非常有用，例如在创建 RESTful API 时。