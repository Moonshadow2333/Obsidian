---
aliases:
  - 数据库
date: 2025-07-20
---

# 目录

```dataviewjs
const startHeadinglevel = 2;
const file = app.workspace.getActiveFile();
const { headings } = app.metadataCache.getFileCache(file);
 
// 全列表的形式
const raws = headings.filter(row => row.heading != "目录").map( p => {
    let repeatCount = Math.max((p.level - startHeadinglevel) * 4, 0);
    let spacesPrefix = ' '.repeat( repeatCount + 4 );
    let listSign = repeatCount > 0 ? '- ' : '';
    let linkText = `[[#${p.heading}]]`;
    let headingList = (p.level < startHeadinglevel) ? `- ${linkText}` : `${spacesPrefix}- ${linkText}`;
    return headingList;
  }
)
 
let result = raws.join('\n');
// 添加行距
dv.container.style.lineHeight = "1.5em";
dv.paragraph(result)
```

# 嵌套循环

# 利用索引或散列寻找匹配元组法

![[查询优化-索引]]

1. 连接的关系中，存在一个关系的连接条件上有 B+ 索引或者散列存储路径
2. 无特殊存储路径的关系作为外循环，有特殊存储路径的关系作为内循环
3. 在外循环的连接条件上作投影，并去重
4. 再通过外循环的值走索引或者散列查询内循环记录的地址

如果连接属性上重复值超过总记录数占比的 20%，还不如使用顺序扫描

# 参考资料

[Chapter 4 —— 查询处理原理与查询优化 - Raymond's Blog](https://blog.raymondhqr.top/archives/database-query-principles-optimizations)
[040_数据库管理系统（八）_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1ux411G7Bs/?p=40&spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=081641abeed94aff322f0473e2c1773d)