---
aliases:
  - 函数依赖
date: 2025-06-10
---

# 目录

```dataviewjs
const startHeadinglevel = 2;
const file = app.workspace.getActiveFile();
const { headings } = app.metadataCache.getFileCache(file);
 
// 全列表的形式
const raws = headings.filter(row => row.heading != "目录").map( p => {
    let repeatCount = Math.max((p.level - startHeadinglevel) * 4, 0);
    let spacesPrefix = ' '.repeat( repeatCount + 4 );
    let listSign = repeatCount > 0 ? '- ' : '';
    let linkText = `[[#${p.heading}]]`;
    let headingList = (p.level < startHeadinglevel) ? `- ${linkText}` : `${spacesPrefix}- ${linkText}`;
    return headingList;
  }
)
 
let result = raws.join('\n');
// 添加行距
dv.container.style.lineHeight = "1.5em";
dv.paragraph(result)
```



---

# 部分函数依赖（Partial Functional Dependency）

## **定义**  
在包含**复合候选键**的关系模式中，若一个**非主属性**仅依赖于候选键的**部分属性**（而非完整的候选键），则称该依赖为**部分函数依赖**。

---

#### **产生原因**  
1. **未遵循第二范式（2NF）**：  
   - 2NF要求所有非主属性必须完全依赖候选键。未满足此条件时，可能保留部分依赖。  
2. **设计缺陷**：  
   - 将存在天然层级关系的属性（如“学号”和“院系”）直接绑定到复合主键中。  
3. **冗余逻辑**：  
   - 未拆分实体间的逻辑关系，直接合并字段导致依赖链不完整。  

---

## **具体示例**  

### 示例1

**表结构**：选课记录表  
- **候选键**：`{学号, 课程号}`（复合主键）  
- **字段**：`学号`、`课程号`、`学生姓名`、`课程学分`、`成绩`  
- **函数依赖**：  

```
​学号→学生姓名(部分依赖，仅依赖候选键的一个属性)
课程号→课程学分(部分依赖)
{学号, 课程号}→成绩(完全依赖)​
```



**问题分析**：  
1. **数据冗余**：同一学生的姓名在选修多门课程时重复存储。  
2. **更新异常**：修改学生姓名时，需更新多条记录。  
3. **插入限制**：若某学生未选课，则无法存储其姓名和院系信息。  

---

#### **解决方案**  
应用**第二范式（2NF）**消除部分依赖：  
1. **拆分为三张表**：  
   - **学生表**：`学号（PK）`, `学生姓名`  
   - **课程表**：`课程号（PK）`, `课程学分`  
   - **成绩表**：`学号（FK）`, `课程号（FK）`, `成绩`  

2. **外键约束**：  
   - 成绩表中的`学号`和`课程号`分别引用学生表和课程表的主键。  

### 示例2

场景：学生选课表

属性：学号（Sno）, 课程号（Cno）, 成绩（Grade）, 学生姓名（Sname）, 所在院系（Sdept）
复合主键：Sno, Cno

函数依赖：

```
​Sno,Cno→Grade(完全依赖)
Sno→Sname(部分依赖)
Sno→Sdept(部分依赖)​
```

分析：

Sname 和 Sdept 只依赖于 Sno，而不依赖于 Cno。因此，Sname 和 Sdept 是部分依赖于复合主键 Sno, Cno。

问题表现：

数据冗余：同一个学生的姓名和院系信息在多条记录中重复存储。
更新异常：若修改某个学生的姓名或院系，需要更新所有相关记录。
插入异常：若某学生未选课，无法直接添加该学生的姓名和院系信息。
删除异常：若删除所有选课记录，该学生的信息也会丢失。


解决方案
通过 第二范式（2NF） 分解消除部分函数依赖：


分解为两张表：

学生表（Students）：Sno（PK）, Sname, Sdept
选课表（Enrollments）：Sno, Cno（PK）, Grade



外键约束：

选课表中的 Sno 作为外键引用 学生表的 Sno。



优化效果：

消除冗余：Sname 和 Sdept 仅存储一次。
避免异常：学生信息可独立维护，更新只需修改单条记录。

---

#### **总结**  
部分函数依赖因非主属性未完全依赖复合候选键而产生，典型表现为冗余和操作异常。通过2NF规范化拆分表结构，可彻底消除此类问题，保障数据一致性与操作效率。