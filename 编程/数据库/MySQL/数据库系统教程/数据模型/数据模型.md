## 层次数据模型

## 网状数据模型

## 关系数据模型

用表来描述现实世界，即用表描述实体以及实体之间的联系。

### 特点

- 基于集合论，更高的抽象；
- 屏蔽所有的底层细节，简单清晰，容易理解；
- 非过程查询语言，SQL；
- 软连接（层次数据模型和网状数据模型在描述实体之间的联系时，都会用到指针，而指针是物理地址）

### attribute and domain

- atomic data （原子数据，即不能表中套表）
- NULL（空值是不知道，而不是空）

### Relation and Tuple

严格准确的数学语言

笛卡尔乘积：笛卡尔乘积的结果就是样本空间，单个样本的属性取值一定是样本空间中的一种


### Primary Key

候选键。

能够唯一决定这条元组其他属性值的那个最小的属性集合。（极大线性无关）

确定一条元组的最小属性集合就是候选键。

例子：在学生表中，学号是唯一的，学号确定了，这个学生就确定了。

全键的概念。

### Foreign Key

soft link

引用完整性约束。

### Other Integrity Constraints

其他完整性约束

域完整性约束；
实体完整性约束（主键不能为空）

### 例子

水手、船员、预定表

预定表中，不能用水手ID和船员ID作为候选键，因为一个水手可以预定同一条船多次，所以应该使用全键。

### 关系代数（Relational Algebra）

- Selection（σ），查
- Projection（π），Deletes unwanted columns from relation. 投影，其实就是选择列操作；
- Cross-product（×）, allows us to combine two relations.
- Set-diffrence(-)，A-B 把属于关系A但不属于关系B的元素找出来；
- union（ ∪），并。

除法操作不是基本操作，但是可以通过基本操作推导出来，即 

$
πx - πx((πx(A) × B) - A)
$

reserves 表

| sid | bid | day |
| --- | --- | --- |
| 22  | 101 | 10/10/96    | 

Boats 表

| bid | bname | color |
| --- | ----- | ----- |
| 101 | tiger | red   |
| 103 | lion  | green |
| 105 | hero  | bu      |

Sails 表

| sid | sname  | rating | age  |
| --- | ------ | ------ | ---- |
| 22  | dustin | 7      | 45.0 |
| 31  | lubber | 8      | 55.5 |
| 58  | rusty  | 10     | 35.0 |

s2


| sid | sname  | rating | age  |
| --- | ------ | ------ | ---- |
| 28  | yuppy  | 9      | 35.0 |
| 31  | lubber | 8      | 55.0 |
| 44  | guppy  | 5      | 35.0 |
| 55  | rusty  | 10     | 35.0 | 

### 笛卡尔乘积

### Join

#### 条件连接

先笛卡尔乘积再做选择操作

#### 等值连接

内连接

#### 自然连接

在所有公共属性上都做等值连接

### 除法

例子

A 表如下：

| sno | pno |
| --- | --- |
| s1  | p1  |
| s1  | p2  |
| s1  | p3  |
| s1  | p4  |
| s2  | p1  |
| s2  | p2  |
| s3  | p2  |
| s4  | p2  |
| s4  | p4  |

B1 如下：

| pno |
| --- |
| p2  |

A/B1

| sno |
| --- |
| s1  |
| s2  |
| s3  |
| s4  |

B2 如下：

| pno |
| --- |
| p2  |
| p4    |

A/B2

| sno |
| --- |
| s1  |
| s4  |

B3 如下所示：

| pno |
| --- |
| p1  |
| p2  |
| p4  |

A/B3

| sno |
| --- |
| s1  |

查询能提供零件p1、p2以及p4的所有的供应商。

### 外连接

保留所有数据，能匹配的则匹配，匹配不上的则为 NULL。

#### 左外连接

#### 右外连接

#### 全外连接

### 外并

对于不符合并兼容（两个表的表结构相同）的两个表强行并在一起。

公共属性保留一份，A 表中有的属性 B 表中没有或者 A 表中没有的属性 B 表中有，这些属性的值都为 NULL。

### 关系演算

[[02.pdf#page=40&selection=3,0,3,19|02, page 40|Relational calculus]]

描述结果满足什么样的条件即可。

### 缺点

[013_数据模型（八）_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1ux411G7Bs/?p=13&spm_id_from=pageDriver&vd_source=081641abeed94aff322f0473e2c1773d)


## ER 数据模型

前面提到了关系型数据模型的缺点，ER 数据模型设计之初是想取代关系型数据模型成为主流的数据模型，但是后面失败了，不过这种数据模型的衍生物ER图却被保留了下来，成为了设计关系型数据库的工具。

### ER 图

#### 基数比约束

1：M
M：1
M：N

#### 参与度约束

一个学生最少选3门最多选6门课程


#### ER 图拓展

##### 弱实体

职工 家属

##### 特殊化和普遍化

父类和子类

##### 聚集

##### 范畴

## 面向对象数据模型

突破了第一范式的限制